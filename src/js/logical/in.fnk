babel_types = import '@babel/types'
{identifier, callExpression} = babel_types

{use_runtime_fn} = import '../runtime.fnk'
{transform_with_partial_lr} = import '../partial/init.fnk'



transform_in = fn node, ctx:
  runtime_fn = '_${node.op}_'
  expr_ctx = use_runtime_fn runtime_fn, ctx

  [left, right, next_ctx, wrap_partial] = transform_with_partial_lr node.left, node.right, expr_ctx

  js = callExpression
    identifier runtime_fn
    [left, right]

  wrap_partial js, next_ctx




