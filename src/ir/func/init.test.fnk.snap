// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`func compiles 1`] = `
"
rec_e fn exports_0:
  id (fn args_0, ret_0: #fn
    lst_h args_0, fn a_0:
      lst_t args_0, fn tail_0:
        lst_h tail_0, fn b_0:
          lst_t tail_0, fn tail_1:
            lst_h tail_1, fn d_0:
              lst_t tail_1, fn tail_2:
                id a_0, fn left_1:
                  id b_0, fn right_0:
                    add left_1, right_0, fn left_0:
                      id c, fn right_1:
                        add left_0, right_1, fn result_0:
                          cc ret_0, result_0
  ), fn fun_0:
    str 'fun', fn key_0:
      rec_s exports_0, key_0, fun_0, fn exports_1:
        id (fn args_1, ret_2: #fn
          lst_h args_1, fn foo_0:
            lst_t args_1, fn tail_3:
              id (fn args_2, ret_1: #fn
                lst_h args_2, fn bar_0:
                  lst_t args_2, fn tail_4:
                    id foo_0, fn callee_0:
                      lst_e fn cargs_0:
                        id bar_0, fn arg_0:
                          lst_a cargs_0, arg_0, fn cargs_1:
                            af callee_0, cargs_1, fn result_2:
                              cc ret_1, result_2
              ), fn result_1:
                cc ret_2, result_1
        ), fn f2_0:
          str 'f2', fn key_1:
            rec_s exports_1, key_1, f2_0, fn exports_2:
              lst_e fn drctvs_0:
                mod exports_2, drctvs_0, fn mod_0:"
`;

exports[`func compiles defaults 1`] = `
"
rec_e fn exports_0:
  id (fn args_0, ret_0: #fn
    lst_h args_0, fn a_0:
      lst_t args_0, fn tail_0:
        int '12', fn flbk_0:
          lst_h tail_0, fn hdm_0:
            ifv hdm_0, hdm_0, flbk_0, fn b_0:
              lst_t tail_0, fn tail_1:
                lst_h tail_1, fn c_0:
                  lst_t tail_1, fn tail_2:
                    id shrub, fn callee_0:
                      lst_e fn cargs_0:
                        id a_0, fn sprd_0:
                          lst_c cargs_0, sprd_0, fn cargs_1:
                            af callee_0, cargs_1, fn result_0:
                              id bar, fn callee_1:
                                lst_e fn cargs_2:
                                  af callee_1, cargs_2, fn result_1:
                                    cc ret_0, result_1
  ), fn fun_0:
    str 'fun', fn key_0:
      rec_s exports_0, key_0, fun_0, fn exports_1:
        lst_e fn drctvs_0:
          mod exports_1, drctvs_0, fn mod_0:"
`;

exports[`func compiles destructuring args 1`] = `
"
rec_e fn exports_0:
  id (fn args_0, ret_0: #fn
    lst_h args_0, fn dlst_0:
      lst_t args_0, fn tail_0:
        lst_h dlst_0, fn a_0:
          lst_t dlst_0, fn tail_1:
            lst_h tail_1, fn dlst_1:
              lst_t tail_1, fn tail_2:
                lst_h dlst_1, fn b_0:
                  lst_t dlst_1, fn tail_3:
                    lst_h tail_0, fn dlst_2:
                      lst_t tail_0, fn tail_4:
                        lst_h dlst_2, fn c_0:
                          lst_t dlst_2, fn tail_5:
                            lst_r tail_5, fn rtail_0:
                              lst_r rtail_0, fn d_0:
                                lst_e fn lst_1:
                                  id a_0, fn left_0:
                                    id b_0, fn right_0:
                                      add left_0, right_0, fn item_1:
                                        lst_a lst_1, item_1, fn lst_0:
                                          id c_0, fn item_0:
                                            lst_a lst_0, item_0, fn result_0:
                                              cc ret_0, result_0
  ), fn fun_0:
    str 'fun', fn key_0:
      rec_s exports_0, key_0, fun_0, fn exports_1:
        lst_e fn drctvs_0:
          mod exports_1, drctvs_0, fn mod_0:"
`;

exports[`func compiles destructuring recs 1`] = `
"
rec_e fn exports_0:
  id (fn args_0, ret_0: #fn
    lst_h args_0, fn drec_0:
      lst_t args_0, fn tail_0:
        str 'a', fn key_0:
          rec_g drec_0, key_0, fn a_0:
            str 'b', fn key_1:
              rec_g drec_0, key_1, fn b_0:
                lst_h tail_0, fn dlst_0:
                  lst_t tail_0, fn tail_1:
                    lst_h dlst_0, fn c_0:
                      lst_t dlst_0, fn tail_2:
                        lst_r tail_2, fn rtail_0:
                          lst_r rtail_0, fn d_0:
                            lst_e fn lst_1:
                              id a_0, fn left_0:
                                id b_0, fn right_0:
                                  add left_0, right_0, fn item_1:
                                    lst_a lst_1, item_1, fn lst_0:
                                      id c_0, fn item_0:
                                        lst_a lst_0, item_0, fn result_0:
                                          cc ret_0, result_0
  ), fn fun_0:
    str 'fun', fn key_2:
      rec_s exports_0, key_2, fun_0, fn exports_1:
        lst_e fn drctvs_0:
          mod exports_1, drctvs_0, fn mod_0:"
`;

exports[`func compiles empty arg 1`] = `
"
rec_e fn exports_0:
  id (fn args_0, ret_0: #fn
    lst_h args_0, fn a_0:
      lst_t args_0, fn tail_0:
        lst_h tail_0, fn unused_0:
          lst_t tail_0, fn tail_1:
            lst_h tail_1, fn unused_1:
              lst_t tail_1, fn tail_2:
                lst_h tail_2, fn b_0:
                  lst_t tail_2, fn tail_3:
                    id b_0, fn result_0:
                      cc ret_0, result_0
  ), fn fun_0:
    str 'fun', fn key_0:
      rec_s exports_0, key_0, fun_0, fn exports_1:
        lst_e fn drctvs_0:
          mod exports_1, drctvs_0, fn mod_0:"
`;

exports[`func compiles empty arg 2`] = `
"
rec_e fn exports_0:
  id (fn args_0, ret_0: #fn
    lst_h args_0, fn unused_0:
      lst_t args_0, fn tail_0:
        lst_h tail_0, fn b_0:
          lst_t tail_0, fn tail_1:
            id b_0, fn result_0:
              cc ret_0, result_0
  ), fn fun_0:
    str 'fun', fn key_0:
      rec_s exports_0, key_0, fun_0, fn exports_1:
        lst_e fn drctvs_0:
          mod exports_1, drctvs_0, fn mod_0:"
`;

exports[`func compiles func of func 1`] = `
"
rec_e fn exports_0:
  id (fn args_0, ret_2: #fn
    lst_h args_0, fn c_0:
      lst_t args_0, fn tail_0:
        id (fn args_1, ret_1: #fn
          lst_h args_1, fn d_0:
            lst_t args_1, fn tail_1:
              lst_h tail_1, fn e_0:
                lst_t tail_1, fn tail_2:
                  lst_e fn lst_1:
                    id d_0, fn item_1:
                      lst_a lst_1, item_1, fn lst_0:
                        id e_0, fn item_0:
                          lst_a lst_0, item_0, fn value_0:
                            id (fn ret_0: #cn
                              id (fn: #cn
                                id (fn: #cn
                                  cc ret_0
                                ), fn else_0:
                                  is_l value_0, fn is_lst_0:
                                    id (fn: #cn
                                      lst_h value_0, fn itm_0:
                                        int '2', fn val_0:
                                          eq itm_0, val_0, fn cond_0:
                                            id (fn: #cn
                                              lst_t value_0, fn tail_3:
                                                lst_h tail_3, fn itm_1:
                                                  int '1', fn val_1:
                                                    eq itm_1, val_1, fn cond_1:
                                                      id (fn: #cn
                                                        int '1', fn left_0:
                                                          id c_0, fn right_0:
                                                            div left_0, right_0, fn result_2:
                                                              cc ret_0, result_2
                                                      ), fn match_res_0:
                                                        cif cond_1, match_res_0, else_0
                                            ), fn match_0:
                                              cif cond_0, match_0, else_0
                                    ), fn match_1:
                                      cif is_lst_0, match_1, else_0
                              ), fn match_lst_0:
                                is_l value_0, fn is_lst_1:
                                  id (fn: #cn
                                    lst_h value_0, fn itm_2:
                                      int '1', fn val_2:
                                        eq itm_2, val_2, fn cond_2:
                                          id (fn: #cn
                                            lst_t value_0, fn tail_5:
                                              lst_h tail_5, fn itm_3:
                                                int '2', fn val_3:
                                                  eq itm_3, val_3, fn cond_3:
                                                    id (fn: #cn
                                                      id c_0, fn result_3:
                                                        cc ret_0, result_3
                                                    ), fn match_res_1:
                                                      cif cond_3, match_res_1, match_lst_0
                                          ), fn match_2:
                                            cif cond_2, match_2, match_lst_0
                                  ), fn match_3:
                                    cif is_lst_1, match_3, match_lst_0
                            ), fn match_lst_1:
                              ac match_lst_1, fn result_1:
                                cc ret_1, result_1
        ), fn result_0:
          cc ret_2, result_0
  ), fn fun5_0:
    str 'fun5', fn key_0:
      rec_s exports_0, key_0, fun5_0, fn exports_1:
        lst_e fn drctvs_0:
          mod exports_1, drctvs_0, fn mod_0:"
`;

exports[`func compiles other 1`] = `
"
rec_e fn exports_0:
  id (fn args_0, ret_1: #fn
    lst_h args_0, fn c_0:
      lst_t args_0, fn tail_0:
        lst_h tail_0, fn d_0:
          lst_t tail_0, fn tail_1:
            int '123', fn x_0:
              id ni, fn value_0:
                id (fn ret_0: #cn
                  id (fn: #cn
                    id (fn: #cn
                      cc ret_0
                    ), fn else_0:
                      id c_0, fn left_0:
                        int '1', fn right_0:
                          add left_0, right_0, fn val_0:
                            eq value_0, val_0, fn cond_0:
                              id (fn: #cn
                                id d_0, fn left_1:
                                  int '1', fn right_1:
                                    add left_1, right_1, fn result_2:
                                      cc ret_0, result_2
                              ), fn match_res_0:
                                cif cond_0, match_res_0, else_0
                  ), fn match_0:
                    id c_0, fn left_2:
                      id x_0, fn right_2:
                        add left_2, right_2, fn val_1:
                          eq value_0, val_1, fn cond_1:
                            id (fn: #cn
                              id d_0, fn result_3:
                                cc ret_0, result_3
                            ), fn match_res_1:
                              cif cond_1, match_res_1, match_0
                ), fn match_1:
                  ac match_1, fn result_1:
                    cc ret_1, result_1
  ), fn fun_0:
    str 'fun', fn key_0:
      rec_s exports_0, key_0, fun_0, fn exports_1:
        lst_e fn drctvs_0:
          mod exports_1, drctvs_0, fn mod_0:"
`;

exports[`func compiles spread 1`] = `
"
rec_e fn exports_0:
  id (fn args_0, ret_0: #fn
    lst_h args_0, fn a_0:
      lst_t args_0, fn tail_0:
        lst_h tail_0, fn b_0:
          lst_t tail_0, fn tail_1:
            lst_r tail_1, fn rtail_0:
              lst_r rtail_0, fn c_0:
                lst_e fn lst_1:
                  id a_0, fn left_0:
                    id b_0, fn right_0:
                      add left_0, right_0, fn item_1:
                        lst_a lst_1, item_1, fn lst_0:
                          id c_0, fn item_0:
                            lst_a lst_0, item_0, fn result_0:
                              cc ret_0, result_0
  ), fn fun_0:
    str 'fun', fn key_0:
      rec_s exports_0, key_0, fun_0, fn exports_1:
        lst_e fn drctvs_0:
          mod exports_1, drctvs_0, fn mod_0:"
`;

exports[`func compiles spread 2`] = `
"
rec_e fn exports_0:
  id (fn args_0, ret_0: #fn
    lst_h args_0, fn a_0:
      lst_t args_0, fn tail_0:
        lst_r tail_0, fn rtail_0:
          lst_h rtail_0, fn c_0:
            lst_t rtail_0, fn tail_1:
              lst_r tail_1, fn b_0:
                lst_e fn lst_2:
                  id a_0, fn item_2:
                    lst_a lst_2, item_2, fn lst_1:
                      id b_0, fn item_1:
                        lst_a lst_1, item_1, fn lst_0:
                          id c_0, fn item_0:
                            lst_a lst_0, item_0, fn result_0:
                              cc ret_0, result_0
  ), fn fun_0:
    str 'fun', fn key_0:
      rec_s exports_0, key_0, fun_0, fn exports_1:
        lst_e fn drctvs_0:
          mod exports_1, drctvs_0, fn mod_0:"
`;

exports[`func compiles spread 3`] = `
"
rec_e fn exports_0:
  id (fn args_0, ret_0: #fn
    lst_r args_0, fn rtail_0:
      lst_r rtail_0, fn a_0:
        id a_0, fn result_0:
          cc ret_0, result_0
  ), fn fun_0:
    str 'fun', fn key_0:
      rec_s exports_0, key_0, fun_0, fn exports_1:
        lst_e fn drctvs_0:
          mod exports_1, drctvs_0, fn mod_0:"
`;

exports[`func handles self ref 1`] = `
"
rec_e fn exports_0:
  id (fn args_0, ret_2: #fn
    z (fn args_1, ret_1, count_0_0: #fn
      lst_h args_1, fn start_0:
        lst_t args_1, fn tail_0:
          id _iterable_, fn callee_0:
            lst_e fn cargs_0:
              id (fn args_2, ret_0: #fn
                lst_e fn lst_1:
                  id start_0, fn left_1:
                    int '1', fn right_1:
                      add left_1, right_1, fn item_1:
                        lst_a lst_1, item_1, fn lst_0:
                          id count_0_0, fn callee_1:
                            lst_e fn cargs_1:
                              id start_0, fn left_0:
                                int '1', fn right_0:
                                  add left_0, right_0, fn arg_1:
                                    lst_a cargs_1, arg_1, fn cargs_2:
                                      af callee_1, cargs_2, fn item_0:
                                        lst_a lst_0, item_0, fn result_2:
                                          cc ret_0, result_2
              ), fn arg_0:
                lst_a cargs_0, arg_0, fn cargs_3:
                  af callee_0, cargs_3, fn result_1:
                    cc ret_1, result_1
    ), fn count_0:
      id count_0, fn callee_2:
        lst_e fn cargs_4:
          int '0', fn arg_2:
            lst_a cargs_4, arg_2, fn cargs_5:
              af callee_2, cargs_5, fn result_3:
                cc ret_2, result_3
  ), fn foo_0:
    str 'foo', fn key_0:
      rec_s exports_0, key_0, foo_0, fn exports_1:
        lst_e fn drctvs_0:
          mod exports_1, drctvs_0, fn mod_0:"
`;

exports[`func handles self ref 2`] = `
"
rec_e fn exports_0:
  id (fn args_0, ret_2: #fn
    z (fn args_1, ret_1, count_0_0: #fn
      tpl_i args_1, 0, fn start_0:
        id (fn args_2, ret_0: #fn
          int '1', fn right_1:
            add start_0, right_1, fn item_1:
              int '1', fn right_0:
                add start_0, right_0, fn arg_1:
                  tpl arg_1, fn cargs_2:
                    af count_0_0, cargs_2, fn item_0:
                      tpl item_1, item_0, fn result_2:
                        cc ret_0, result_2
        ), fn arg_0:
          tpl arg_0, fn cargs_3:
            af _iterable_, cargs_3, fn result_1:
              cc ret_1, result_1
    ), fn count_0:
      int '0', fn arg_2:
        tpl arg_2, fn cargs_5:
          af count_0, cargs_5, fn result_3:
            cc ret_2, result_3
  ), fn foo_0:
    str 'foo', fn key_0:
      rec_s exports_0, key_0, foo_0, fn exports_1:
        tpl, fn drctvs_0:
          mod exports_1, drctvs_0, fn mod_0:"
`;

exports[`func handles self-ref scoping 1`] = `
"
rec_e fn exports_0:
  id foo, fn undefined_0:
    str 'undefined', fn key_0:
      rec_s exports_0, key_0, undefined_0, fn exports_1:
        id (fn args_0, ret_1: #fn
          id (fn args_1, ret_0: #fn
            id undefined_0, fn result_1:
              cc ret_0, result_1
          ), fn result_0:
            cc ret_1, result_0
        ), fn bar_0:
          str 'bar', fn key_1:
            rec_s exports_1, key_1, bar_0, fn exports_2:
              lst_e fn drctvs_0:
                mod exports_2, drctvs_0, fn mod_0:"
`;

exports[`recursive funcs compiles recursive calls 1`] = `
"
rec_e fn exports_0:
  z (fn args_0, ret_1, fun_0_0: #fn
    lst_h args_0, fn a_0:
      lst_t args_0, fn tail_0:
        lst_h tail_0, fn b_0:
          lst_t tail_0, fn tail_1:
            id a_0, fn value_0:
              id (fn ret_0: #cn
                id (fn: #cn
                  id fun_0_0, fn callee_0:
                    lst_e fn cargs_0:
                      id a_0, fn left_0:
                        int '1', fn right_0:
                          sub left_0, right_0, fn arg_0:
                            lst_a cargs_0, arg_0, fn cargs_1:
                              af callee_0, cargs_1, fn result_1:
                                cc ret_0, result_1
                ), fn else_0:
                  id b_0, fn val_0:
                    eq value_0, val_0, fn cond_0:
                      id (fn: #cn
                        id a_0, fn result_2:
                          cc ret_0, result_2
                      ), fn match_res_0:
                        cif cond_0, match_res_0, else_0
              ), fn match_0:
                ac match_0, fn result_0:
                  cc ret_1, result_0
  ), fn fun_0:
    str 'fun', fn key_0:
      rec_s exports_0, key_0, fun_0, fn exports_1:
        lst_e fn drctvs_0:
          mod exports_1, drctvs_0, fn mod_0:"
`;

exports[`types infers fn ret type 1`] = `
"
rec_e fn exports_0(rec):
  id (fn args_0(tpl), ret_0(cn): #fn
    int '1', fn left_0(int):
      int '2', fn right_0(int):
        add left_0, right_0, fn result_0(int):
          cc ret_0, result_0
  ), fn foo_0(fn: int):
    str 'foo', fn key_0(str):
      rec_s exports_0, key_0, foo_0, fn exports_1(rec{foo: fn: int}):
        lst_e fn drctvs_0(tpl):
          mod exports_1, drctvs_0, fn mod_0(mod):"
`;

exports[`types infers fn ret type 2`] = `
"
rec_e fn exports_0(rec):
  id (fn args_0(tpl), ret_0(cn): #fn
    lst_h args_0, fn a_0:
      lst_t args_0, fn tail_0(tpl):
        lst_h tail_0, fn b_0:
          lst_t tail_0, fn tail_1(tpl):
            id a_0, fn left_0(???):
              id b_0, fn right_0(???):
                add left_0, right_0, fn result_0(int|float):
                  cc ret_0, result_0
  ), fn foo_0(fn: int|float):
    str 'foo', fn key_0(str):
      rec_s exports_0, key_0, foo_0, fn exports_1(rec{foo: fn: int|float}):
        lst_e fn drctvs_0(tpl):
          mod exports_1, drctvs_0, fn mod_0(mod):"
`;

exports[`types infers fn ret type 3`] = `
"
rec_e fn exports_0(rec):
  id (fn args_0(tpl), ret_0(cn): #fn
    lst_h args_0, fn a_0:
      lst_t args_0, fn tail_0(tpl):
        lst_h tail_0, fn b_0:
          lst_t tail_0, fn tail_1(tpl):
            id a_0, fn left_0(???):
              id b_0, fn left_1(???):
                float '1.2', fn right_1(float):
                  mul left_1, right_1, fn right_0(float):
                    add left_0, right_0, fn result_0(float):
                      cc ret_0, result_0
  ), fn foo_0(fn: float):
    str 'foo', fn key_0(str):
      rec_s exports_0, key_0, foo_0, fn exports_1(rec{foo: fn: float}):
        lst_e fn drctvs_0(tpl):
          mod exports_1, drctvs_0, fn mod_0(mod):"
`;

exports[`types infers fn ret type 4`] = `
"
rec_e fn exports_0(rec):
  id (fn args_0(tpl), ret_0(cn): #fn
    lst_h args_0, fn a_0:
      lst_t args_0, fn tail_0(tpl):
        lst_h tail_0, fn b_0:
          lst_t tail_0, fn tail_1(tpl):
            rec_e fn rec_1(rec):
              str 'a', fn key_1(str):
                id a_0, fn val_1(???):
                  rec_s rec_1, key_1, val_1, fn rec_0(rec{a: ???}):
                    str 'b', fn key_0(str):
                      id b_0, fn val_0(???):
                        rec_s rec_0, key_0, val_0, fn result_0(rec{a: ???, b: ???}):
                          cc ret_0, result_0
  ), fn foo_0(fn: rec{a: ???, b: ???}):
    str 'foo', fn key_2(str):
      rec_s exports_0, key_2, foo_0, fn exports_1(rec{foo: fn: rec{a: ???, b: ???}}):
        lst_e fn drctvs_0(tpl):
          mod exports_1, drctvs_0, fn mod_0(mod):"
`;

exports[`types infers fn ret type 5`] = `
"
rec_e fn exports_0(rec):
  id (fn args_0(tpl), ret_0(cn): #fn
    lst_h args_0, fn a_0:
      lst_t args_0, fn tail_0(tpl):
        lst_h tail_0, fn b_0:
          lst_t tail_0, fn tail_1(tpl):
            lst_e fn lst_1(tpl):
              id a_0, fn item_1(???):
                lst_a lst_1, item_1, fn lst_0(tpl[???]):
                  id b_0, fn item_0(???):
                    lst_a lst_0, item_0, fn result_0(tpl[???, ???]):
                      cc ret_0, result_0
  ), fn foo_0(fn: tpl[???, ???]):
    str 'foo', fn key_0(str):
      rec_s exports_0, key_0, foo_0, fn exports_1(rec{foo: fn: tpl[???, ???]}):
        lst_e fn drctvs_0(tpl):
          mod exports_1, drctvs_0, fn mod_0(mod):"
`;
