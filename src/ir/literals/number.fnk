
{rx, matches} = import '@fink/std-lib/regex.fnk'
{ir_fn} = import '../transform.fnk'


float = fn val, loc:
  ir_fn 'float', [val], {loc}


int = fn val, loc:
  ir_fn 'int', [val], {loc}



transform_number = fn {value, loc}, result, ctx:
  expr = match value:
    matches ?, rx'\.':
      float value, loc
    else:
      int value, loc

  [[[expr, [result]]], ctx]

