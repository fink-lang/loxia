
{rx, matches} = import '@fink/std-lib/regex.fnk'
{ir_fn_x} = import '../context.fnk'


float = fn val, res_id, {loc}, ctx:
  ir_fn_x 'float', [val], res_id, {loc}, ctx


int = fn val, res_id, {loc}, ctx:
  ir_fn_x 'int', [val], res_id, {loc}, ctx



transform_number = fn {value, loc}, res_id, ctx:
  [exprs, , next_ctx] = match value:
    matches ?, rx'\.':
      float value, res_id, {loc}, ctx
    else:
      int value, res_id, {loc}, ctx

  [exprs, next_ctx]

