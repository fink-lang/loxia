{fink2js} = import '../../testing'
{describe, it, expect, to_match_snapshot} = import '@fink/jest'


describe 'find', fn:
  it 'compiles simple find', fn:
    expect
      fink2js '
        find item:
          item > 3
      '
      to_match_snapshot


  it 'compiles complex find', fn:
    expect
      fink2js '
        find {item}:
          match item:
            {spam}: shrub
            else: ni

        find [foo, ...bar]:
          foo_alone = foo and is_empty bar
          foo_alone

        find [...foo, bar]:
          bar and is_empty foo
      '
      to_match_snapshot


  it 'compiles find with accu', fn:
    expect
      fink2js '
        find item, is_even_elem=false:
          (item > 123 and is_even_elem, not is_even_elem)
      '
      to_match_snapshot



describe 'find async', fn:
  it 'compiles', fn:
    expect
      fink2js '
        find item:
          await item > 3
      '
      to_match_snapshot


