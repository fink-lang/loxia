{fink2js} = import '../../testing/generate.fnk'
{describe, it, expect, to_match_snapshot} = import '@fink/jest/test.fnk'


describe 'call', fn:
  it 'compiles', fn:
    expect
      fink2js '
        call1 = a ni, x=123, ...x
        call2 = a ni
        call3 = a _
        call4 = a fn x: x * 2
        call5 = a foo, , bar
      '
      to_match_snapshot


  it 'compiles as partial', fn:
    expect
      fink2js '
        foo ?
        foo ?, 123
        foo ...?
        foo ...?.bar
        ? 123
        ? bar, spam
        ?.bar spam
      '
      to_match_snapshot


  it 'compiles with partial args', fn:
    expect
      fink2js '
        filter ? == 1
        filter ? or foo ?
        filter not ?
        map ?.foo
        map ? % 2 == 0
      '
      to_match_snapshot


