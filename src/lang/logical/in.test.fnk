{fink2js} = import '../../testing/generate.fnk'
{describe, it, expect, to_match_snapshot} = import '@fink/jest/test.fnk'


describe 'in', fn:
  it 'shortcuts known with knwon right hand side', fn:
    expect
      fink2js "
        foo = 1 in [1, 2, 3]
        bar = '2' in '1234'
        spam = key in {foo: bar}
        shrub = item in ni
      "
      to_match_snapshot


  it 'compiles with explicit legacy impl', fn:
    expect
      fink2js "
        {_in_} = import '@fink/loxia:iter:legacy'
        foo = 1 in [1, 2, 3]
        bar = '2' in '1234'
        spam = key in {foo: bar}
        shrub = item in ni
      "
      to_match_snapshot


  it 'compiles with custom builin lib', fn:
    expect
      fink2js "
        {_in_} = import './foo.fnk'
        foo = 1 in [1, 2, 3]
        bar = '2' in '1234'
        spam = key in {foo: bar}
        shrub = item in ni
      "
      to_match_snapshot
